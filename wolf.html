<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>WolfAPP!</title>

	<script src="js/mobilecheck.js"></script>
	<script>
		if (hasTouchScreen) document.write(`<script type="text/javascript" src="js/touchpolyfill.js"><\/script>`);
	</script>
	<script src="js/draggable.js"></script>
	<script src="js/wolffuncs.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/jitbit/HtmlSanitizer@master/HtmlSanitizer.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/micromodal/dist/micromodal.min.js"></script>

	<link href="css/wolfcustom.css" rel="stylesheet">
	<link href="css/app.css" rel="stylesheet">
	<link href="css/micromodal.css" rel="stylesheet">
	<link href="css/scroll.css" rel="stylesheet">
	<link href="css/cursors/pixel.css" rel="stylesheet">

</head>

<!-- Background by http://king-lulu-deer.deviantart.com -->

<body class="overflow-hidden">
	<div class="flex flex-col h-screen justify-between">
		<!-- Text (Paragraph) Elements are added with by Page init script at line  -->
		<div id="main" class="flex text-shadow-lg grid grid-cols-8 h-full w-auto gap-4 overflow-hidden px-6 py-2">
			<div id="p1" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p2" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p3" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p4" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p5" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p6" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p7" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p8" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p9" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p10" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p11" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p12" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p13" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p14" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p15" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
			<div id="p16" class="relative flex flex-col bg-yellow-100 border rounded-lg overflow-hidden">
				<img class="img object-cover h-4/5 opacity-0" src="https://i.imgur.com/JWPNXkA.jpg"
					alt="Girl in a jacket" />
			</div>
		</div>
		<!-- Message box -->
		<div id="msgbox" class="absolute flex flex-col w-1/2 min-w-96 h-96 bg-white bg-opacity-50 rounded shadow-2xl">
			<div id="msgboxheader" onclick="domGet('msgtitle').innerHTML = 'WolfChat';this.removeAttribute('onclick')"
				draggable="true"
				class="w-full h-10 pixel-pointer bg-gray-500 bg-opacity-50 rounded-tr rounded-tl flex items-center justify-between text-shadow-sm">
				<span id="msgtitle" class="text-sm font-medium ml-1">WolfChat (drag to move)</span>
				<div class="whitespace-no-wrap">
					<span class="text-sm font-medium mr-1">Day: <span id="day">0</span></span>
					<span class="text-sm font-medium mr-1">Phase: <span id="phase">Day</span></span>
					<span class="text-sm font-medium mr-1">Timer: <span id="timer">?</span></span>
				</div>
				<div class="whitespace-no-wrap">
					<span class="text-sm font-medium mr-1">Joined: <span id="joined">?</span></span>
					<span class="text-sm font-medium mr-1">Online: <span id="online">?</span></span>
				</div>
			</div>
			<div onclick="input.focus()" class="overflow-auto overflow-y-scroll px-1 py-1 h-full" id="messages">
				<div class="flex items-center pr-4 pt-2">
					<span
						class="flex ml-0.5 h-auto bg-gray-300 text-gray-100 text-sm font-normal rounded-sm px-1 p-1 items-end min-w-1/4 justify-between">
						Connecting...., You should receive a message from Wolf Master if connected.
						<span class="text-black text-xs pl-1 whitespace-no-wrap">$.MT</span>
					</span>
				</div>
			</div>
			<div class="flex justify-between items-center p-1">
				<!-- input -->
				<div class="flex-grow pr-2">
					<form id="form">
						<input type="text" autocomplete="off"
							class="rounded-lg px-2 py-2 focus:outline-none h-auto placeholder-gray-100 bg-gray-900 text-white text-sm w-full"
							placeholder="Type a message..." id="input" />
					</form>
				</div>
				<div id="Action" class="w-15 h-7 rounded-lg bg-pink-300 text-center items-center flex hidden">
					<button id="Action_btn"
						class="w-15 h-7 rounded-lg text-center items-center flex justify-center focus:outline-none hover:bg-gray-900 hover:text-white"
						data-micromodal-trigger="modal-1">Actions</button>
				</div>
				<div id="Join" class="w-8 h-7 rounded-lg bg-green-300 text-center items-center flex">
					<button id="Join_btn"
						class="w-8 h-7 rounded-lg text-center items-center flex justify-center focus:outline-none hover:bg-gray-900 hover:text-white"
						onclick="join();">Join</button>
				</div>
			</div>
		</div>

		<script>
			dragElement(domGet('msgbox'));

			const cid = Math.floor(Math.random() * 10000);
			const form = domGet('form');
			const input = domGet('input');
			const messages = domGet('messages');
			const msgbox = domGet('msgbox');
			const msgboxheader = domGet('msgboxheader');

			form.addEventListener('submit', function (e) {
				e.preventDefault();
				if (input.value) sendbtn();
			});


			function sendbtn() {
				isCmd = false;
				var msg = HtmlSanitizer.SanitizeHtml(input.value);
				if (msg.charAt(0) == '!' && msg.charAt(1) == '#') isCmd = true;

				var msgelem = `
					<div class="flex justify-end pl-4 pt-2">
						<span class="flex ml-0.5 h-auto ${isCmd ? 'bg-red-700' : 'bg-indigo-800'} text-yellow-50 text-sm font-normal rounded-sm px-1 p-1 items-end">
							<span>${msg}</span>
							<span class="text-gray-400 pl-1" style="font-size: 8px;">You</span>
						</span>
					</div>`;
				addMsg(msgelem)

				isCmd ? sendCmd(msg) : sendMsg(msg);
				input.value = '';
			}
		</script>
		<!-- END Message box -->

		<!-- //Modals -->
		<div>
			<div class="modal micromodal-slide" id="modal-1" aria-hidden="true">
				<div class="modal__overlay" tabindex="-1" data-micromodal-close>
					<div class="p-8 bg-white rounded box-border overflow-y-auto max-w-lg max-h-screen absolute"
						id="modal-1-drag" role="dialog" aria-modal="true" aria-labelledby="modal-1-dragheader">
						<header class="flex justify-between">
							<h2 class="modal__title pixel-pointer" draggable="true" id="modal-1-dragheader">
								Actions (drag to move)
							</h2>
							<button aria-label="Close modal" data-micromodal-close>✕</button>
						</header>
						<main class="modal__content" id="modal-1-content">
							You are a <span style="color:#9CA3AF">Spectator</span>, grab a popcorn & your favorite drink
							and watch the game of lies, or maybe join the town perhaps?<br>
						</main>
						<footer class="modal__footer flex justify-between">
							<span>
								<input id="modal_confirm" ontouchstart="openAction()" onmouseup="openAction()"
									data-micromodal-close data-action
									class="modal__btn modal__btn-primary hidden pixel-pointer" type="submit"
									value="Confirm" />
							</span>
							<span>
								<button class="modal__btn" data-micromodal-close
									aria-label="Close this dialog window">Close</button>
							</span>
						</footer>
					</div>
				</div>
			</div>
			<div class="modal micromodal-slide" id="modal-action" aria-hidden="true">
				<div class="p-3 bg-white rounded box-border overflow-y-auto max-w-lg max-h-screen absolute top-4 left-6"
					id="modal-action-drag" role="dialog" aria-modal="true" aria-labelledby="modal-action-dragheader">
					<header class="flex justify-between">
						<h2 class="modal__title pixel-pointer whitespace-no-wrap" draggable="true"
							id="modal-action-dragheader">
							<span id="modal-action-title">Vote</span> (Drag to move)
						</h2>
						<button aria-label="Close modal" data-micromodal-close>✕</button>
					</header>
					<main class="modal__content" id="modal-action-content">
						<div id="modal-action-main">
							Click on the player name to vote:
						</div>
						<div id="modal-action-playerlist"></div>
					</main>
					<footer class="modal__footer flex justify-between">
						<span>
							<input data-micromodal-close data-action
								class="modal__btn modal__btn-primary hidden pixel-pointer" type="submit"
								value="Confirm" />
						</span>
						<span>
							<button class="modal__btn" data-micromodal-close
								aria-label="Close this dialog window">Close</button>
						</span>
					</footer>
				</div>
			</div>
		</div>
		<div class="hidden">
			<p id="action-trigger" data-micromodal-trigger="modal-action"></p>
		</div>
	</div>
</body>

<script desc='Blade'>
	room = '';
</script>
<script>
	dragElement(domGet('modal-1-drag'));
	dragElement(domGet('modal-action-drag'));
	main = domGet('main');
	white = new Set(['BODY', 'FONT'])
	for (elem in HtmlSanitizer.AllowedTags)
		if (!white.has(elem)) HtmlSanitizer.AllowedTags[elem] = false;
	MicroModal.init();

	//Page init
	for (user = 1; user <= 16; user++) {
		insertHTML(`
		<div class="absolute inset-0 text-center">
			<p class="pt-top text-4xl text-yellow-300">0</p>
		</div>
		<div class="absolute inset-0 inset-y-1/3 text-center">
			<p class="pt-mid text-6xl text-red-700">0</p>
		</div>
		<div class="absolute bottom-0 right-0 text-right">
			<p>${user}.<span class="name">???</span></p>
			<p class="status"></p>
		</div>`, domGet('p' + user));
	}
	//End Page init
</script>
<script src="https://cdn.socket.io/4.0.1/socket.io.min.js"
	integrity="sha384-LzhRnpGmQP+lOvWruF/lgkcqD+WDVt9fU3H4BWmwP5u5LTmkUGafMcpZKNObVMLU"
	crossorigin="anonymous"></script>
<script class="NO-CACHE" src="js/roles.js"></script>
<script class="NO-CACHE" src="js/wolfsocket.js"></script>
<!-- <script src="js/nocache.js"></script> -->

</html>